---
// React Image Workspace é›†æˆ
---

<div id="react-image-workspace-root" class="react-image-workspace-container">
</div>

<style>
  #react-image-workspace-root {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    overflow: hidden;
    order: 4; /* åœ¨æœ€å³ä¾§ */
  }

  .react-image-workspace-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    order: 4; /* åœ¨æœ€å³ä¾§ */
  }
</style>

<script>
  // åŠ¨æ€å¯¼å…¥ React å’Œç»„ä»¶
  import React from "react";
  import { createRoot } from "react-dom/client";

  // ç«‹å³æ‰§è¡Œæˆ–ç­‰å¾… DOM åŠ è½½å®Œæˆ
  function mountReactImageWorkspace() {
    const container = document.getElementById("react-image-workspace-root");

    if (container) {
      console.log("ğŸš€ Mounting React Image Workspace Component...");

      // åŠ¨æ€å¯¼å…¥ ImageWorkspace ç»„ä»¶
      import("./react/ImageWorkspace")
        .then((module) => {
          const ImageWorkspace = module.default;
          const root = createRoot(container);
          root.render(React.createElement(ImageWorkspace));

          console.log(
            "âœ… React Image Workspace Component Mounted Successfully"
          );
        })
        .catch((error) => {
          console.error(
            "âŒ Failed to load React Image Workspace Component:",
            error
          );
        });
    } else {
      console.warn(
        "âš ï¸ react-image-workspace-root container not found, retrying..."
      );
      // å¦‚æœå®¹å™¨è¿˜æ²¡å‡†å¤‡å¥½,ç¨åé‡è¯•
      setTimeout(mountReactImageWorkspace, 100);
    }
  }

  // æ£€æŸ¥ DOM æ˜¯å¦å·²ç»åŠ è½½å®Œæˆ
  if (document.readyState === "loading") {
    // DOM è¿˜åœ¨åŠ è½½ä¸­,ç­‰å¾… DOMContentLoaded äº‹ä»¶
    document.addEventListener("DOMContentLoaded", mountReactImageWorkspace);
  } else {
    // DOM å·²ç»åŠ è½½å®Œæˆ,ç›´æ¥æ‰§è¡Œ
    mountReactImageWorkspace();
  }
</script>
