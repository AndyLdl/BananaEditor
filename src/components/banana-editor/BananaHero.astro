---
/**
 * Z-Image Studio Dark Hero Component
 * Text-to-Image Operation Area with Background Marquee
 */

import { Icon } from "astro-icon/components";
import { loadTranslations, createTranslator } from "../../i18n/utils";
import { detectLanguageFromRequest } from "../../utils/language-detector";
import HeroImageGenerator from "./HeroImageGenerator";

const currentLang = detectLanguageFromRequest(Astro.request);
const homeTranslations = await loadTranslations(currentLang, "home");
const t = createTranslator(currentLang, homeTranslations);

// Images for the background carousel
// 建议准备20-30张不同的图片，每行使用不同的图片集合
// 当前示例：每行使用不同的图片组合，避免重复感

// Row 1 images (可以添加更多不同的图片)
const row1Images = [
  "/images/gallery-images/image1.jpeg",
  "/images/gallery-images/image2.jpeg",
  "/images/gallery-images/image3.jpeg",
  "/images/gallery-images/image4.jpeg",
  "/images/gallery-images/image5.jpeg",
  "/images/gallery-images/image6.jpeg",
  "/images/gallery-images/image7.jpeg",
  "/images/gallery-images/image8.jpeg",
  // 添加更多图片：hero-1.png, hero-2.png, hero-3.png, ... hero-15.png
];

// Row 2 images (不同的图片集合)
const row2Images = [
  "/images/gallery-images/image9.jpeg",
  "/images/gallery-images/image10.jpeg",
  "/images/gallery-images/image11.jpeg",
  "/images/gallery-images/image12.jpeg",
  "/images/gallery-images/image13.jpeg",
  "/images/gallery-images/image15.jpeg",
  // 添加更多图片：hero-16.png, hero-17.png, hero-18.png, ... hero-30.png
];

// Row 3 images (不同的图片集合)
const row3Images = [
  "/images/gallery-images/image16.jpeg",
  "/images/gallery-images/image17.jpeg",
  "/images/gallery-images/image18.jpeg",
  "/images/gallery-images/image19.jpeg",
  "/images/gallery-images/image20.jpeg",
  // 添加更多图片
];

// Row 4 images (不同的图片集合)
const row4Images = [
  "/images/gallery-images/image21.jpeg",
  "/images/gallery-images/image22.jpeg",
  "/images/gallery-images/image23.jpeg",
  "/images/gallery-images/image24.jpeg",
  "/images/gallery-images/image25.jpeg",
  // 添加更多图片
];

// Triple each row's images to ensure smooth infinite scrolling
const imagesRow1 = [...row1Images, ...row1Images, ...row1Images];
const imagesRow2 = [...row2Images, ...row2Images, ...row2Images];
const imagesRow3 = [...row3Images, ...row3Images, ...row3Images];
const imagesRow4 = [...row4Images, ...row4Images, ...row4Images];
---

<section
  id="hero"
  class="relative overflow-hidden bg-z-bg text-z-text min-h-screen flex flex-col justify-center py-20">
  <!-- Background Marquee (Low Opacity) -->
  <div
    class="absolute inset-0 z-0 flex items-center justify-center pointer-events-none select-none overflow-hidden">
    <!-- Skew effect for dynamic background -->
    <div class="marquee-wrapper w-[120%] -rotate-6 scale-110 opacity-60">
      <!-- Row 1: Normal direction -->
      <div class="marquee-track flex gap-6">
        {
          imagesRow1.map((src, index) => (
            <div class="marquee-item flex-shrink-0 rounded-xl overflow-hidden bg-z-surface">
              <img
                src={src}
                alt=""
                class="w-full h-full object-cover opacity-90"
              />
            </div>
          ))
        }
      </div>
      <!-- Row 2: Reverse direction -->
      <div
        class="marquee-track flex gap-6 mt-6"
        style="animation-direction: reverse;">
        {
          imagesRow2.map((src, index) => (
            <div class="marquee-item flex-shrink-0 rounded-xl overflow-hidden bg-z-surface">
              <img
                src={src}
                alt=""
                class="w-full h-full object-cover opacity-90"
              />
            </div>
          ))
        }
      </div>
      <!-- Row 3: Normal direction -->
      <div class="marquee-track flex gap-6 mt-6">
        {
          imagesRow3.map((src, index) => (
            <div class="marquee-item flex-shrink-0 rounded-xl overflow-hidden bg-z-surface">
              <img
                src={src}
                alt=""
                class="w-full h-full object-cover opacity-90"
              />
            </div>
          ))
        }
      </div>
      <!-- Row 4: Reverse direction -->
      <div
        class="marquee-track flex gap-6 mt-6"
        style="animation-direction: reverse;">
        {
          imagesRow4.map((src, index) => (
            <div class="marquee-item flex-shrink-0 rounded-xl overflow-hidden bg-z-surface">
              <img
                src={src}
                alt=""
                class="w-full h-full object-cover opacity-90"
              />
            </div>
          ))
        }
      </div>
    </div>

    <!-- Gradient Overlay to fade background (lighter) -->
    <div
      class="absolute inset-0 bg-gradient-to-b from-z-bg/40 via-z-bg/20 to-z-bg/40 z-10">
    </div>
  </div>

  <div class="container mx-auto px-4 z-10 relative">
    <!-- Header Text -->
    <div class="text-center mb-40">
      <h1
        class="text-4xl md:text-6xl font-bold tracking-tight mb-6 leading-tight">
        <span class="text-white">Z-Image - AI Image Generation</span><br />
      </h1>
      <p
        class="text-gray-400 text-base md:text-lg max-w-3xl mx-auto leading-relaxed">
        Z-Image is a powerful 6B-parameter foundation model delivering
        ultra-fast inference, bilingual text rendering, and state-of-the-art
        image generation capabilities.
      </p>
    </div>

    <!-- Operation Area (Interface) -->
    <div
      class="max-w-6xl mx-auto bg-[#1a1b1e]/80 backdrop-blur-xl border border-white/10 rounded-2xl p-4 md:p-6 shadow-2xl">
      <div class="grid md:grid-cols-2 gap-4 h-auto md:h-[500px]">
        <HeroImageGenerator client:load />
      </div>
    </div>
  </div>
</section>

<style>
  .marquee-track {
    width: max-content;
    animation: scroll 120s linear infinite;
  }

  .marquee-item {
    width: 300px;
    height: 200px;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .font-display {
    font-family: "Inter", system-ui, sans-serif;
    letter-spacing: -0.02em;
  }

  .font-mono {
    font-family: "JetBrains Mono", "Fira Code", monospace;
    letter-spacing: -0.05em;
  }
</style>
