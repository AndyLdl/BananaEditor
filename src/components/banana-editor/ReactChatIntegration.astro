---
// React èŠå¤©ç»„ä»¶é›†æˆ
---

<div id="react-chat-root" class="react-chat-container"></div>

<style>
  #react-chat-root {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    overflow: hidden;
  }

  .react-chat-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
  }
</style>

<script>
  // åŠ¨æ€å¯¼å…¥ React å’Œç»„ä»¶
  import React from "react";
  import { createRoot } from "react-dom/client";

  // ç«‹å³æ‰§è¡Œæˆ–ç­‰å¾… DOM åŠ è½½å®Œæˆ
  function mountReactChat() {
    const container = document.getElementById("react-chat-root");

    if (container) {
      console.log("ğŸš€ Mounting React Chat Component...");

      // åŠ¨æ€å¯¼å…¥ ChatContainer ç»„ä»¶
      import("./react/ChatContainer")
        .then((module) => {
          const ChatContainer = module.default;
          const root = createRoot(container);
          root.render(React.createElement(ChatContainer));

          console.log("âœ… React Chat Component Mounted Successfully");
        })
        .catch((error) => {
          console.error("âŒ Failed to load React Chat Component:", error);
        });
    } else {
      console.warn("âš ï¸ react-chat-root container not found, retrying...");
      // å¦‚æœå®¹å™¨è¿˜æ²¡å‡†å¤‡å¥½ï¼Œç¨åé‡è¯•
      setTimeout(mountReactChat, 100);
    }
  }

  // æ£€æŸ¥ DOM æ˜¯å¦å·²ç»åŠ è½½å®Œæˆ
  if (document.readyState === "loading") {
    // DOM è¿˜åœ¨åŠ è½½ä¸­ï¼Œç­‰å¾… DOMContentLoaded äº‹ä»¶
    document.addEventListener("DOMContentLoaded", mountReactChat);
  } else {
    // DOM å·²ç»åŠ è½½å®Œæˆï¼Œç›´æ¥æ‰§è¡Œ
    mountReactChat();
  }
</script>
